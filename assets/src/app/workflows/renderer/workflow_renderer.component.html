<div *ngIf="renderer">
<div
  class="line"
  *ngFor="let line of renderer.graph"
  >
  <span *ngFor="let step of line"
    class="step"
    [ngStyle]="{flex: renderer.getStepWeight(step)}"
    >
    <span
      *ngIf="step.name"
      [ngClass]="{disabled: !step.enable}"
      title="{{step.name | jobType}}"
      >
      <mat-checkbox class='small'
        color="primary"
        [(ngModel)]="step.enable"
        (change)="updateEnabledSteps(step)"
        [disabled]=!active_steps[step.name]
        ></mat-checkbox>

      <mat-icon>{{step.name | iconForJob}}</mat-icon>
      <label
        [ngClass]="{'active': active_steps[step.name]}"
        (click)="step.enable = !step.enable; updateEnabledSteps(step)">
        {{step.name | jobType}}
      </label>

      <mat-list dense>
        <mat-list-item
          *ngFor="let parameter of step.parameters">
          <mat-form-field
            class="parameter"
            *ngIf="parameter.type != 'boolean'">
            <input matInput
              type={{parameter.type}}
              placeholder="{{parameter.id | parameterLabel}}"
              [disabled]="!step.enable || !parameter.enable"
              value={{parameter.value}}
              [(ngModel)]=parameter.value
              (change)=toNumber(parameter)>
          </mat-form-field>
          <div
            *ngIf="parameter.type == 'boolean'"
            class="parameter"
            [ngClass]="{disabled: !step.enable}"
            >
            <mat-checkbox
            class="small"
              color="accent"
              [disabled]="!step.enable || !parameter.enable"
              [(ngModel)]=parameter.value
              >
              {{parameter.id | parameterLabel}}
            </mat-checkbox>
          </div>
        </mat-list-item>
      </mat-list>
    </span>
    <mat-divider *ngIf="step.name">
    </mat-divider>
  </span>
</div>
</div>