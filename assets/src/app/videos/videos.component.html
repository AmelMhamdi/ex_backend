
<h1>
  Vidéos
</h1>

<div class="search-bar">
  <div>
    <mat-form-field class="search-text-input">
      <input matInput type="text" placeholder="Filtrer par titre, sous-titre..." [(ngModel)]="searchInput"/>
      <button mat-button *ngIf="searchInput" matSuffix mat-icon-button aria-label="Effacer" (click)="searchInput=''">
        <mat-icon>X</mat-icon>
      </button>
    </mat-form-field>
  </div>
  <div>
    <mat-form-field>
      <mat-select
        class="channels-select"
        placeholder="Chaîne"
        [(ngModel)]="selectedChannels"
        multiple
        >
        <mat-option
          *ngFor="let channel of channels"
          [value]="channel.id"
          [ngClass]="channel.id"
          class="channels-option"
          >
          {{ channel.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div>
    <mat-slide-toggle [(ngModel)]="enableDatePickers">
      Filtrer par date
    </mat-slide-toggle>
    <mat-form-field>
      <input matInput
        [max]="dateRange.getEnd()"
        [matDatepicker]="picker_after"
        placeholder="Diffusion après le..."
        [value]="dateRange.getStart()"
        [disabled]="!enableDatePickers"
        (dateChange)="setStartDate($event)"
        >
      <mat-datepicker-toggle matSuffix [for]="picker_after"></mat-datepicker-toggle>
      <mat-datepicker #picker_after></mat-datepicker>
    </mat-form-field>
    <mat-form-field>
      <input matInput
        [min]="dateRange.getStart()"
        [matDatepicker]="picker_before"
        placeholder="Diffusion avant le..."
        [value]="dateRange.getEnd()"
        [disabled]="!enableDatePickers"
        (dateChange)="setEndDate($event)"
        >
      <mat-datepicker-toggle matSuffix [for]="picker_before"></mat-datepicker-toggle>
      <mat-datepicker #picker_before></mat-datepicker>
    </mat-form-field>
  </div>
  <button mat-button (click)="filterVideos()">Rechercher</button>
</div>

<ul *ngIf="videos" class="videos">
  <li
    *ngFor="let video of videos.data"
    class="video {{video.channel}}"
    [ngClass]="{'available': video.available, 'not-available': !video.available}"
    >
    <span class="legacy_id">
      {{video.legacy_id}}
    </span>
    <span class="title">
      {{video.title}}
    </span>
  </li>
</ul>

<mat-paginator
  [length]="length"
  [pageSize]="pageSize"
  [pageIndex]="page"
  (page)="pageEvent = eventGetVideos($event)">
</mat-paginator>
